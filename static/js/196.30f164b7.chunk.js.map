{"version":3,"file":"static/js/196.30f164b7.chunk.js","mappings":"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","sources":["utilities/analysisUtilities.js","components/ComparePage/compareWorker.js","data/constants.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["import { v4 as uuid } from 'uuid'\r\nimport Attack from './Attack'\r\nimport { CLASS_CARD, MOD, UNIT, WEAPON, getAllOptionalAbilities } from \"./optionalAbilityUtilities\"\r\nimport { ACC, BLACK, GREEN, WHITE, DICE_MAX, DICE_MIN, ATTACK, DEFENSE, UNITS, WEAPONS, MODS, CLASS_CARDS } from '../data'\r\n\r\n/**\r\n * Interface function that gets an Attack object with the right data\r\n * @param {object} unitAttack Data about the unit attack\r\n * @param {object} attack Data about the attack\r\n * @param {object?} defense Optional data about the defense (for adding the defense bonus in)\r\n * @param {number?} requiredAccuracy A minimum required accuracy to hit, below which damage is 0\r\n * @returns {Attack} An Attack object\r\n */\r\nexport const getAttackObject = (attack, defense, requiredAccuracy = 0, postWebWorkerMessage) => {\r\n    return new Attack(\r\n        attack.dice.concat(defense?.dice || []),\r\n        attack.surgeAbilities,\r\n        addValues(attack.bonus, defense?.bonus),\r\n        requiredAccuracy,\r\n        [ attack.rerollAbilities || [], defense?.rerollAbilities || [] ],\r\n        postWebWorkerMessage\r\n    )\r\n}\r\n\r\n/**\r\n * Gets the average damage and histogram for an attack and defense\r\n * @param {{ \r\n *  customAttack: object, \r\n *  customDefense: object,\r\n *  requiredAccuracy: number\r\n * }} data The attack and defense data\r\n * @returns {{ \r\n *  average: number, \r\n *  histogram: {value: number, amount: number, percentage: number, atLeastPercentage: number }[],\r\n * }} All the stats data\r\n */\r\nexport const getStatsResults = ({ customAttack, customDefense, requiredAccuracy }, postWebWorkerMessage) => {\r\n    const attackData = getAttackObject(customAttack, customDefense, requiredAccuracy, postWebWorkerMessage)\r\n    return {\r\n        average: attackData.average,\r\n        histogram: getHistogram(attackData.rolls, attackData.probabilities)\r\n    }\r\n}\r\n\r\n/**\r\n * Takes data about an attack and computes averages vs 1 black die and vs 1 white die\r\n * and other data for comparison\r\n * \r\n * @param {{ \r\n *  name: string, dice: string[], bonus: number[], \r\n *  unitData: { unit: object?, classCards: object[], weapon: object?, mods: object[], focused: boolean } \r\n *  requiredAccuracy: number,\r\n * }} attackData Data about an attack\r\n * @returns {object} comparison data for the attack\r\n */\r\nexport const getCompareResults = ({ name, unitData, requiredAccuracy = 0, ...customData }, postWebWorkerMessage) => {\r\n    const blackAttack = getAttackObject(customData, { dice: [BLACK] }, requiredAccuracy, postWebWorkerMessage)\r\n    const whiteAttack = getAttackObject(customData, { dice: [WHITE] }, requiredAccuracy, postWebWorkerMessage)\r\n    const [min, max] = getMinMaxAccuracy(customData)\r\n    return { \r\n        id: uuid(), \r\n        name, \r\n        ...customData, \r\n        unitData, \r\n        whiteAvgDam: whiteAttack.average, \r\n        blackAvgDam: blackAttack.average, \r\n        whiteHistogram: getHistogram(whiteAttack.rolls, whiteAttack.probabilities), \r\n        blackHistogram: getHistogram(blackAttack.rolls, blackAttack.probabilities), \r\n        minAcc: min, \r\n        maxAcc: max \r\n    }\r\n}\r\n\r\n/**\r\n * Adds the values of two arrays together to produce a new array\r\n * @param {number[]} a An array to add\r\n * @param {number[][]} others Any other arrays to add (of the same length as a)\r\n * @returns {number[]} An array of the sum of the values of all the arrays\r\n */\r\nexport const addValues = (a = [0, 0, 0, 0, 0, 0], ...others) => {\r\n    return a.map((value, index) => value + others.reduce((total, b) => b ? total + b[index] : total, 0))\r\n}\r\n\r\n/**\r\n * Creates histogram data for damage\r\n * @param {number[]} damageOfRolls an array of damage numbers for all possible rolls\r\n * @param {number[]} probabilityOfRolls an array of probabilities for all possible rolls\r\n * @returns {{\r\n *  value: number, \r\n *  amount: number, \r\n *  percentage: number, \r\n *  atLeastPercentage: number }[]\r\n * } An array of histogram data\r\n */\r\nexport const getHistogram = (damageOfRolls, probabilityOfRolls) => {\r\n    const probabilityTotal = probabilityOfRolls.reduce((total, p) => p + total, 0)\r\n    const histogram = []\r\n    // For each possible roll, add the data to the histogram\r\n    for(let rollIndex = 0; rollIndex < damageOfRolls.length; rollIndex++) {\r\n        let item = histogram.find(item => item.value === damageOfRolls[rollIndex]);\r\n        // If there's not already an item in the histogram for that property value, make one\r\n        if (!item) {\r\n            item = { value: damageOfRolls[rollIndex], amount: 0 }\r\n            histogram.push(item)\r\n        }\r\n        // Count this data point in the histogram\r\n        item.amount += probabilityOfRolls[rollIndex]\r\n    }\r\n    // Sort the histogram by property value\r\n    histogram.sort((a, b) => a.value - b.value)\r\n    // Calculate percentage of getting the value\r\n    histogram.forEach(item => item.percentage = 100 * item.amount / probabilityTotal)\r\n    // Calculate percentage of getting at least the value\r\n    for (let i = histogram.length - 1; i >= 0; i--) {\r\n        histogram[i].atLeastPercentage = (i === histogram.length - 1) ?\r\n            histogram[i].percentage :\r\n            histogram[i].percentage + histogram[i + 1].atLeastPercentage\r\n    }\r\n    return histogram;\r\n}\r\n\r\nconst removeFromArray = (array, toRemove) => {\r\n    let newArray = [...array]\r\n    toRemove.forEach(item => {\r\n        if (newArray.indexOf(item) !== -1) {\r\n            newArray.splice(newArray.indexOf(item), 1)\r\n        }\r\n    })\r\n    return newArray\r\n}\r\n\r\n/**\r\n * Combines all the unit & class cards & weapon & mods data to make one set of attack data\r\n * @param {{ \r\n *  cards: object[]?, \r\n *  focused: boolean?,\r\n *  hidden: boolean?, \r\n *  selectedOptionalIds: string[]?}} unitData The data to combine\r\n * @returns {{ \r\n *  dice: string[], \r\n *  bonus: [], \r\n *  surgeAbilities: number[][], \r\n *  rerollAbilities: [number[], number[]] }} The combined attack data\r\n */\r\nexport const getAttackData = ({ cards = [], focused = false, hidden = false, selectedOptionalIds = [] }) => {\r\n    const optionals = getAllOptionalAbilities({ cards, isAttack: true })\r\n        .filter(a => selectedOptionalIds.includes(a.id));\r\n\r\n    return {\r\n        dice: removeFromArray(\r\n            [].concat(\r\n                cards.flatMap(c => c.attackDice),\r\n                optionals.flatMap(a => a.dice),\r\n                (focused ? GREEN : undefined),\r\n            ).filter(d => d),\r\n            optionals.flatMap(a => a.negativeAttackDice).filter(d => d)\r\n        ),\r\n        surgeAbilities: [].concat(\r\n            cards.flatMap(c => c.surgeAbilities || []),\r\n            optionals.flatMap(a => a.surgeAbilities || [])\r\n        ),\r\n        bonus: addValues(\r\n            ...cards.map(c => c.attackBonus),\r\n            ...optionals.map(a => a.bonus),\r\n            (hidden ? [0,0,1,0,0,0] : undefined)\r\n        ),\r\n        rerollAbilities: [].concat(\r\n            cards.flatMap(c => (c.rerollAbilities && c.rerollAbilities[ATTACK]) || []),\r\n            optionals.flatMap(o => (o.rerollAbilities && o.rerollAbilities[ATTACK]) || [])\r\n        )\r\n    }\r\n}\r\n\r\n/**\r\n * Combines all the unit & class cards to make one set of defense data\r\n * @param {{ cards: object[]?, hidden: boolean?, selectedOptionalIds: string[]? }} unitData The data to combine\r\n * @returns {{ dice: string[], bonus: [], rerollAbilities: [number[], number[]] }} The combined defense data\r\n */\r\nexport const getDefenseData = ({ cards = [], hidden = false, selectedOptionalIds = [] }) => {\r\n    const optionals = getAllOptionalAbilities({ cards })\r\n        .filter(a => selectedOptionalIds.includes(a.id));\r\n\r\n    return {\r\n        dice: [].concat(\r\n            cards.flatMap(c => c.defenseDice),\r\n            optionals.flatMap(a => a.dice)\r\n        ).filter(d => d),\r\n        bonus: addValues(\r\n            ...cards.map(c => c.defenseBonus),\r\n            (hidden ? [-2,0,0,0,0,0] : undefined)\r\n        ),\r\n        rerollAbilities: [].concat(\r\n            cards.flatMap(c => (c.rerollAbilities && c.rerollAbilities[DEFENSE]) || []),\r\n            optionals.flatMap(o => (o.rerollAbilities && o.rerollAbilities[DEFENSE]) || [])\r\n        )\r\n    }\r\n}\r\n\r\n/**\r\n * Gets the minimum and maximum possible accuracy for a given attack against a given defense\r\n * @param {{ dice: string[], surgeAbilities: number[][], bonus: [], rerolls: number }} attack The combined attack data\r\n * @param {{ dice: string[], bonus: [], rerolls: number }?} defense The combined defense data\r\n * @returns {[number, number]} An array with the min and max accuracy, in that order\r\n */\r\nexport const getMinMaxAccuracy = (attack, defense) => {\r\n    let min = attack.dice.reduce((total, die) => DICE_MIN[die] + total, 0)\r\n        + attack.bonus[ACC]\r\n        + (defense?.bonus[ACC] || 0)\r\n    let max = attack.dice.reduce((total, die) => DICE_MAX[die] + total, 0)\r\n        + attack.bonus[ACC]\r\n        + (defense?.bonus[ACC] || 0)\r\n        + attack.surgeAbilities.reduce((total, ability) => total + ability[ACC], 0)\r\n    return [min < 0 ? 0 : min, max < 0 ? 0 : max]\r\n}\r\n\r\n/**\r\n * Gets the type (unit, weapon, mod, or class card) of a card\r\n * @param {object} card The card to get the type of\r\n * @returns {string} The type of the card\r\n */\r\nexport const getCardType = (card) => {\r\n    if(card.id >= 4000) return CLASS_CARD\r\n    if(card.id >= 3000) return MOD\r\n    if(card.id >= 2000) return WEAPON\r\n    else return UNIT\r\n}\r\n\r\n/**\r\n * Gets the unit, weapon, mod, or class card with a particular id\r\n * @param {number} id The id to check for\r\n * @returns {object} The unit, weapon, mod, or class card with that id\r\n */\r\nexport const getCardFromId = (id) => {\r\n    return UNITS.find(u => u.id === id) \r\n        || WEAPONS.find(w => w.id === id) \r\n        || MODS.find(m => m.id === id) \r\n        || CLASS_CARDS.find(c => c.id === id)\r\n}","import { getCompareResults } from \"../../utilities\"\r\n\r\nonmessage = (message) => {\r\n    let lastProgress = 0\r\n    const postProgressMessageForHalf = (progress) => {\r\n        // Rounded to tenths and halved\r\n        let newProgress = Math.round(progress * 10) / 20\r\n        if(newProgress < lastProgress)\r\n            newProgress += 50\r\n        if(newProgress !== lastProgress) {\r\n            postMessage(newProgress)\r\n            lastProgress = newProgress\r\n        }\r\n    }\r\n    // Get the stats results and pass in the postMessage function with the web worker context bound to it\r\n    const results = getCompareResults(message.data, postProgressMessageForHalf)\r\n    // Post a message with the final results\r\n    postMessage(results)\r\n}","\r\nexport const ACC = 0 // Accuracy\r\nexport const DAM = 1 // Damages\r\nexport const SUR = 2 // Surges\r\nexport const BLO = 3 // Blocks\r\nexport const EVA = 4 // Evades\r\nexport const DOD = 5 // Dodges\r\n\r\nexport const RER = 6 // Rerolls\r\n\r\n// Ability checks\r\nexport const STRENGTH = 0\r\nexport const INSIGHT = 1\r\nexport const TECH = 2\r\n\r\n// Reroll ability data indexes\r\nexport const TYPE = 0\r\nexport const AMOUNT = 1\r\n\r\n// Player/Reroll types\r\nexport const ATTACK = 0\r\nexport const DEFENSE = 1\r\nexport const ATTACK_OR_DEFENSE = 2\r\nexport const ATTACK_AND_DEFENSE = 3\r\nexport const ALL_ATTACK = 4\r\nexport const TURN_ATTACK_DIE = 5\r\nexport const DEFENSE_THEN_ATTACK = 6\r\n\r\n// Reroll type labels\r\nexport const REROLL_TYPE_LABELS = {\r\n    [ATTACK]: \"attack\",\r\n    [DEFENSE]: \"defense\",\r\n    [ATTACK_OR_DEFENSE]: \"all attack or all defense\",\r\n    [ATTACK_AND_DEFENSE]: \"all attack and all defense\",\r\n    [ALL_ATTACK]: \"all attack\",\r\n    [TURN_ATTACK_DIE]: \"Turn 1 attack die with 1 attack symbol\",\r\n    [DEFENSE_THEN_ATTACK]: \"1 defense then 1 attack\"\r\n}\r\n\r\nexport const PLAYER_TYPE_LABELS = {\r\n    [ATTACK]: \"Attack\",\r\n    [DEFENSE]: \"Defense\"\r\n}\r\n\r\nexport const PROPERTY_LABELS = [\"Accuracy\", \"Damage\", \"Surge\", \"Block\", \"Evade\", \"Dodge\", \"Reroll\"]\r\n\r\nexport const BLUE = \"Blue\"\r\nexport const RED = \"Red\"\r\nexport const GREEN = \"Green\"\r\nexport const YELLOW = \"Yellow\"\r\nexport const BLACK = \"Black\"\r\nexport const WHITE = \"White\"\r\nexport const WILD = \"Wild\"\r\n\r\nexport const ATTACK_DICE = [RED, GREEN, BLUE, YELLOW]\r\nexport const DEFENSE_DICE = [BLACK, WHITE]\r\n\r\n// CSS classes to apply the right color for each dice\r\nexport const DICE_CLASSES = {\r\n    [GREEN]: \"success\", \r\n    [BLUE]: \"info\", \r\n    [YELLOW]: \"warning\", \r\n    [RED]: \"danger\", \r\n    [BLACK]: \"dark border border-light-gray\", \r\n    [WHITE]: \"white\"\r\n}\r\n\r\n// The minimum and maximum possible accuracy for each dice\r\nexport const DICE_MIN = {\r\n    [GREEN]: 1, \r\n    [BLUE]: 2, \r\n    [YELLOW]: 0, \r\n    [RED]: 0, \r\n    [BLACK]: 0, \r\n    [WHITE]: 0\r\n}\r\nexport const DICE_MAX = {\r\n    [GREEN]: 3, \r\n    [BLUE]: 5, \r\n    [YELLOW]: 2, \r\n    [RED]: 0, \r\n    [BLACK]: 0, \r\n    [WHITE]: 0\r\n}\r\n\r\n/**\r\n * The sides of all dice by color\r\n * In order of: Accuracy, Damages, Surges, Blocks, Evades, Dodges\r\n */\r\nexport const DICE = {\r\n    [RED]: [\r\n        [0, 1, 0, 0, 0, 0],\r\n        [0, 2, 0, 0, 0, 0],\r\n        [0, 2, 0, 0, 0, 0],\r\n        [0, 2, 1, 0, 0, 0],\r\n        [0, 3, 0, 0, 0, 0],\r\n        [0, 3, 0, 0, 0, 0]\r\n    ],\r\n    [GREEN]: [\r\n        [1, 0, 1, 0, 0, 0],\r\n        [1, 1, 1, 0, 0, 0],\r\n        [1, 2, 0, 0, 0, 0],\r\n        [2, 1, 1, 0, 0, 0],\r\n        [2, 2, 0, 0, 0, 0],\r\n        [3, 2, 0, 0, 0, 0]\r\n    ],\r\n    [BLUE]: [\r\n        [2, 0, 1, 0, 0, 0],\r\n        [2, 1, 0, 0, 0, 0],\r\n        [3, 1, 1, 0, 0, 0],\r\n        [3, 2, 0, 0, 0, 0],\r\n        [4, 2, 0, 0, 0, 0],\r\n        [5, 1, 0, 0, 0, 0]\r\n    ],\r\n    [YELLOW]: [\r\n        [0, 0, 1, 0, 0, 0],\r\n        [0, 1, 2, 0, 0, 0],\r\n        [1, 2, 0, 0, 0, 0],\r\n        [1, 1, 1, 0, 0, 0],\r\n        [2, 1, 0, 0, 0, 0],\r\n        [2, 0, 1, 0, 0, 0]\r\n    ],\r\n    [BLACK]: [\r\n        [0, 0, 0, 1, 0, 0],\r\n        [0, 0, 0, 1, 0, 0],\r\n        [0, 0, 0, 2, 0, 0],\r\n        [0, 0, 0, 2, 0, 0],\r\n        [0, 0, 0, 3, 0, 0],\r\n        [0, 0, 0, 0, 1, 0]\r\n    ],\r\n    [WHITE]: [\r\n        [0, 0, 0, 1, 1, 0],\r\n        [0, 0, 0, 1, 1, 0],\r\n        [0, 0, 0, 1, 0, 0],\r\n        [0, 0, 0, 0, 1, 0],\r\n        [0, 0, 0, 0, 0, 0],\r\n        [0, 0, 0, 0, 0, 1]\r\n    ]\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [593,728], function() { return __webpack_require__(5196); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"593\":\"e216fc05\",\"728\":\"1a5a8271\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"/imperial-assault-calculator/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t196: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkassault_calculator\"] = self[\"webpackChunkassault_calculator\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn Promise.all([\n\t\t__webpack_require__.e(593),\n\t\t__webpack_require__.e(728)\n\t]).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["getAttackObject","attack","defense","requiredAccuracy","postWebWorkerMessage","Attack","dice","concat","surgeAbilities","addValues","bonus","rerollAbilities","a","others","map","value","index","reduce","total","b","getHistogram","damageOfRolls","probabilityOfRolls","probabilityTotal","p","histogram","rollIndex","item","find","amount","push","length","sort","forEach","percentage","i","atLeastPercentage","getMinMaxAccuracy","min","die","DICE_MIN","ACC","max","DICE_MAX","ability","onmessage","message","lastProgress","results","name","unitData","customData","blackAttack","BLACK","whiteAttack","WHITE","id","uuid","whiteAvgDam","average","blackAvgDam","whiteHistogram","rolls","probabilities","blackHistogram","minAcc","maxAcc","getCompareResults","data","progress","newProgress","Math","round","postMessage","DAM","SUR","BLO","EVA","DOD","TYPE","AMOUNT","ATTACK","DEFENSE","ATTACK_OR_DEFENSE","ATTACK_AND_DEFENSE","ALL_ATTACK","TURN_ATTACK_DIE","DEFENSE_THEN_ATTACK","BLUE","RED","GREEN","YELLOW","DICE","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","x","__webpack_exports__","O","deferred","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","keys","every","key","splice","r","d","definition","o","defineProperty","enumerable","get","f","e","chunkId","Promise","all","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","call","installedChunks","importScripts","chunkLoadingGlobal","self","parentChunkLoadingFunction","bind","moreModules","runtime","pop","next","then"],"sourceRoot":""}